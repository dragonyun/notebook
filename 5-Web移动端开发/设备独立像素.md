## 设备独立像素

设备独立像素( `DeviceIndependentPixels`)简称 `DIP`或 `DP`。

典型的用途是允许移动设备软件将信息显示和用户交互扩展到不同的[屏幕尺寸](https://baike.baidu.com/item/屏幕尺寸/3031029)。允许应用程序以[抽象](https://baike.baidu.com/item/抽象/9021828)像素为单位进行测量，而底层图形系统将应用程序的抽象像素测量值转换为适合于特定设备的物理像素。



### 来源

---

手机参数上的分辨率描述的像素都是 物理像素，即设备的真实物理单元。

但是在我们从 `320x480`  发展到 `640x940`时，分辨率提高了一倍，那么原来的页面元素（假如有一个`100x100`的）如果直接按照物理像素保持不变，那么随着分辨率的提高，这个 页面元素 会变的越来越小。

乔布斯在 `iPhone4`的发布会上首次提出了 `RetinaDisplay`(视网膜屏幕)的概念，它正是解决了上面的问题。

在 `iPhone4`使用的视网膜屏幕中，把 `2x2`个像素当 `1`个像素使用，这样让屏幕看起来更精致，但是元素的大小却不会改变。

这样的话，原来`100x100`物理像素到了两倍分辨率的手机上会占用`200x200`物理像素。

> 那么如果宽度是100个像素，我们可以说列宽是100个设备独立像素。

**值得一提的是**

> chrome 的开发者工具，我们在模拟各个型号的时候，上面显示的那个尺寸，比如`iphone X`显示的是`375x812`，实际分辨率肯定比这个高，这个就是 设备独立像素。



### 设备像素比

---

设备像素比 `device pixel ratio`简称 `dpr`，即物理像素和设备独立像素的比值。

在 `web`中，浏览器为我们提供了 `window.devicePixelRatio`来帮助我们获取 `dpr`。

在 `css`中，可以使用媒体查询 `min-device-pixel-ratio`，区分 `dpr`：

```css
@media (-webkit-min-device-pixel-ratio: 2),(min-device-pixel-ratio:2){}
```

在 `ReactNative`中，我们也可以使用 `PixelRatio.get()`来获取 `DPR`。

当然，上面的规则也有例外， `iPhone6、7、8Plus`的实际物理像素是 `1080x1920`，在开发者工具中我们可以看到：它的设备独立像素是 `414x736`，设备像素比为 `3`，设备独立像素和设备像素比的乘积并不等于 `1080x1920`，而是等于 `1242x2208`。

实际上，手机会自动把 `1242x2208`个像素点塞进 `1080*1920`个物理像素点来渲染，我们不用关心这个过程，而 `1242x2208`被称为屏幕的 `设计像素`。我们开发过程中也是以这个 `设计像素`为准。

实际上，从苹果提出视网膜屏幕开始，才出现设备像素比这个概念，因为在这之前，移动设备都是直接使用物理像素来进行展示。

紧接着， `Android`同样使用了其他的技术方案来实现 `DPR`大于 `1`的屏幕，不过原理是类似的。由于 `Android`屏幕尺寸非常多、分辨率高低跨度非常大，不像苹果只有它自己的几款固定设备、尺寸。所以，为了保证各种设备的显示效果， `Android`按照设备的像素密度将设备分成了几个区间。



### 移动端开发

---

在 `iOS`、 `Android`和 `ReactNative`开发中样式单位其实都使用的是设备独立像素。

`iOS`的尺寸单位为 `pt`， `Android`的尺寸单位为 `dp`， `ReactNative`中没有指定明确的单位，它们其实都是设备独立像素 `dp`。

 `UI`给我们的原型图一般是基于 `iphone6`的像素给定的。

为了适配所有机型，我们在写样式时需要把物理像素转换为设备独立像素：例如：如果给定一个元素的高度为 `200px`(这里的 `px`指物理像素，非 `CSS`像素)， `iphone6`的设备像素比为 `2`，我们给定的 `height`应为 `200px/2=100dp`。



### WEB端开发

---

在写 `CSS`时，我们用到最多的单位是 `px`，即 `CSS像素`，当页面缩放比例为 `100%`时，一个 `CSS像素`等于一个设备独立像素。

但是 `CSS像素`是很容易被改变的，当用户对浏览器进行了放大， `CSS像素`会被放大，这时一个 `CSS像素`会跨越更多的物理像素。

`页面的缩放系数=CSS像素/设备独立像素`。



### K 和 P

---

我们经常见到用 `K`和 `P`这个单位来形容屏幕：

`P`代表的就是屏幕纵向的像素个数， `1080P`即纵向有 `1080`个像素，分辨率为 `1920X1080`的屏幕就属于 `1080P`屏幕。

我们平时所说的高清屏其实就是屏幕的物理分辨率达到或超过 `1920X1080`的屏幕。

`K`代表屏幕横向有几个 `1024`个像素，一般来讲横向像素超过 `2048`就属于 `2K`屏，横向像素超过 `4096`就属于 `4K`屏。