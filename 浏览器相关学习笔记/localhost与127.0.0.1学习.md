## localhost与127.0.0.1学习总结

> 我们平时会默认把两者当做等价的，但是它们不等价。
>
> 其实，我平时也会把它们当做等价的，感觉它们的关系就像是域名和IP之间的关系一样。
>
> 但是我真的遇到了问题，才想着去看它们有什么不同。

> - 我遇到的问题是：localhost不能访问，但是127.0.0.1能访问？？？

### 概念

> localhost：也叫local ，正确的解释是：本地服务器
> 127.0.0.1：在windows等系统的正确解释是：本机地址(本机服务器)

> 注意：一个是“本地”，一个是“本机”。

### 工作原理

> localhot：是不经网卡传输的，它不受网络防火墙和网卡相关的的限制。
> 127.0.0.1：是通过网卡传输的，它依赖网卡，并受到网络防火墙和网卡相关的限制。

> 通过概念和工作原理，就能大概知道它们的不同了；
>
> 那么，前面我遇到的问题也可以解释了：
>
> **用localhost访问时，系统带的本机当前用户的权限去访问，**
>
> **用ip访问的时候，等于本机是通过网络再去访问本机，可能涉及到网络用户的权限。**

> 那我们也可以明白另一个道理：
>
> **一般设置程序时本地服务用localhost是最好的，localhost不会解析成IP，也不会占用网卡、网络资源。**

> **不过还是要具体问题具体分析**

### 问题解决

- **localhost不能访问127.0.0.1可以访问**？

> ```js
> 一般情况下ping localhost 应该为127.0.0.1 ，但是有时会出来下面这个东西：
> 
> >ping localhost
> reply from ::1: times<1ms
> reply from ::1: times<1ms
> reply from ::1: times<1ms
> 
> 地址根本不是“127.0.0.1”，而是“::1:”
> 
> >ping 127.0.0.1 正常
> reply from 127.0.0.1 : bytes=32 times<1ms
> reply from 127.0.0.1 : bytes=32 times<1ms
> reply from 127.0.0.1 : bytes=32 times<1ms
> ```

- 原因分析

> IPV6协议将127.0.0.1解析为 ::1 (127.0.0.1 ipv6的形式)
> Vista开始菜单中输入cmd回车后打开命令提示符，输入ping localhost默认的就会出现返回的数据包并不是127.0.0.1而是::1。这就是Ipv6格式的本地地址

- 解决方案1

> 修改host文件用记事本打开C:/WINDOWS/system32/drivers/etc/hosts文件，看里面是否有包含：
>
> 127.0.0.1 localhost
>
> 如果没有则将其添加进去，再查看能否访问localhost。
>
> host文件部分内容
>
> \# 127.0.0.1 localhost
> \# ::1 localhost
> 127.0.0.1localhost
> localhost 127.0.0.1

- 解决方案2

> 1、打开Internert信息管理查看IIS是否启动，且默认网站时候已经开启；
> 2、打开http://127.0.0.1/ 看是否能访问IIS的默认网页，能访问则说明IIS已经成功安装到电脑上，可能是无法解析localhost；
> 3、开始--命令（cmd）--ping localhost，看是否能ping通，从127.0.0.1上返回信息，如果成功则说明可以解析localhost；
> 4、如果上一步不成功，则用记事本打开C:/WINDOWS/system32/drivers/etc/hosts文件，看里面是否有包含：127.0.0.1 localhost ，如果没有则将其添加进去，再查看能否访问localhost。
> 5、尝试将网站的主目录指向另一个目录或新建一个虚拟目录，并在该新目录创建一个新的网页文件，如index.html，然后将其加到默认网站的"文档"项中作为默认访问的网页，重新输入网址：http://localhost/，看否能访问。
> 6、还是不行的话将IIS卸载掉，重新再安装一次。

- **解决问题的思路**

> 1、ping一下localhost，这个是关键，看看是否能ping通，然后看解析到那个ip地址下去了
> 2、然后查看本机的hosts文件，看看是否有被修改，如果被修改，就改回正常的模式
> 3、解决问题本质，ipconfig看看网络是否正常，如果不正常就进行修复
> 4、用杀毒软件或者360等修复软件进行扫描，看看是否存在恶意插件或者病毒，然后清除，一劳永逸！
> 5、多动脑，想办法解决问题，善于用搜索引擎。

---

> 以上大部分是网上找来的，总结一下吧
>
> 通过概念和工作原理基本能理解它们的不同，然后可以去按顺序排查问题；
>
> 首先确实想到的是ping两者，看看两者是不是解析相同；
>
> 然后看看让它们关联在一起的hosts文件里面是不是写的有问题；
>
> 再接下来就看网络有没有毛病了，IP的方式要用网卡，要走网络；
>
> 其它有问题，那只能是病毒之类的乱七八糟的问题了。