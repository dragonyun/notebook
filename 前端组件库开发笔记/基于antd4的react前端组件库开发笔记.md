## react组件库开发笔记

最近因为工作需要，开发组件库，当然不是从零开始，目前是基于 ant design4 和 ag-Grid 进行迁移工作。



### 为什么要开发组件库

- 为了主题切换

  主题切换主要包括**脚手架和组件库**。

  我们希望对于组件的**样式替换**尽量放在组件库，我们会提供大多数的通用组件，这样可以最大程度的满足 UI 的要求，规范是固定的，那么可以都由我们来维护，这样可以做到统一。并且，antd4给了更好的定制主题的解决方案。

- 为了使用新技术

  React 现在力推 Hooks，antd4 里面支持了新的技术，并且改造了部分组件以支持新特性，拥抱改变，拥抱新技术，让未来可以有改造的空间。

- 为了迁移整合

  上一版的组件库是外包写的，然后写一半跑路了，我们接了这个摊子，最好的办法就是有时间可以重整整个组件库，这就是一个最好的机会。

- 为了过一遍技术，锻炼，学习

  这是我个人的理由，这样让我有机会接触开发组件库的整个过程，既可以站在巨人的肩膀上，又可以梳理学习一遍组件库开发用到的相关技术栈，是一个锻炼学习的好机会。



### 组件库开发要点

#### 一、样式

- 著名模块classnames

  写样式需要**类名**，通过变化类名变化样式，一个dom节点会有很多 类名，可能是ant-xxx，可能是某种行为的名字，可能是某种大小的名字，可能是使用者传进来的自定义名字，不同的名字共同组成一个dom节点，这很常见。

  那么就需要组合不同的类名，classnames就是一个很好的解决方案。可以直接写名字，也可以写变量，可以拼接名称，主要是可以动态生成。

- 统一的前缀

  这个也很常见，让使用者能认出来这是哪个组件库的，比如ant-，或者我们的cmbd-。

  这个解决方案是 React 的 Context 特性，既可以提供全局属性，方法，又可以做到订阅发布。

  这样既可以方便的修改统一的前缀，又可以修改组件尺寸大小。

- 主题切换（主要是color）

  主题切换就是凭借less文件中的变量实现的。

  有一个定义变量的文件，其他样式文件就从这个文件中取变量值，主题的切换，就是切换变量对应的值。（待定，我还没看懂）

