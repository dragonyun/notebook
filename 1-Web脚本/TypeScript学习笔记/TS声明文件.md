## TS 声明文件

​	TS的声明文件至关重要，是TS的核心。

​	首先，TS 是js的超集，可以认为 TS=JS+类型声明，TS是静态类型，js是动态类型，这样就意为着类型检测的时机不同，意义重大。

​	**静态类型检查是在编译阶段，动态类型检查是在执行阶段。**这就意味着你可以在代码编译的阶段发现问题，并且对于团队合作，阅读代码，IDE语法检查都很有帮助。

​	因此**类型声明**就可以认为是TS的核心，声明文件的重要性就不言而喻了。

---

​	结合一点实际来说明一下：

​	1、声明文件一般是 .d.ts 文件，在组件库里面很常见，大多是和js配合使用，因为如果直接用 .ts 文件，那类型声明就可以直接写在文件里，没必要配对一个 .d.ts 的文件。所以如果一开始是 js 开发，也可以通过添加 .d.ts 文件来让 ts 编译器识别。

​	2、@types/xxx，这个是npm上的包，比如在使用 ts 开发时， react包 需要再安装一个 @types/react 才可以。其他也是一样，声明文件写好之后可以发到npm上去，让原本用js开发的依赖包可以通过添加 @types/xxx 包支持 ts 开发。



### 结构

#### 概述

​	一般来讲，**你*组织*声明文件的方式取决于库是如何被使用的**。 在JavaScript中一个库有很多使用方式，这就需要你书写声明文件去匹配它们。 这篇指南涵盖了如何识别常见库的模式，和怎样书写符合相应模式的声明文件。

> 我上面的举例并不完全，声明文件的使用方式 取决于 对应的库 的使用方式。



#### 识别库的使用类型

> 首先介绍一下有哪些库，以及使用类型，还有如果通过**使用方法和源码**来识别

**全局库**

*全局*库是指能在全局命名空间下访问的（例如：不需要使用任何形式的`import`）。 许多库都是简单的暴露出一个或多个全局变量。 比如，如果你使用过 [jQuery](https://jquery.com/)，`$`变量可以被够简单的引用：

```js
$(() => { console.log('hello!'); } );
```

你经常会在全局库的指南文档上看到如何在HTML里用脚本标签引用库：

```html
<script src="http://a.great.cdn.for/someLib.js"></script>
```

目前，大多数流行的全局访问型库实际上都以UMD库的形式进行书写。 UMD库的文档很难与全局库文档两者之间难以区分。 在书写全局声明文件前，一定要确认一下库是否真的不是UMD。

> *UMD*模块是指那些既可以作为模块使用（通过导入）又可以作为全局（在没有模块加载器的环境里）使用的模块。

​	**从代码上识别全局库**

全局库的代码通常都十分简单。 一个全局的“Hello, world”库可能是这样的：

```js
function createGreeting(s) {
    return "Hello, " + s;
}
// 或者是下面这样
window.createGreeting = function(s) {
    return "Hello, " + s;
}
```

当你查看全局库的源代码时，你通常会看到：

- 顶级的`var`语句或`function`声明
- 一个或多个赋值语句到`window.someName`
- 假设DOM原始值像`document`或`window`是存在的

你*不会*看到：

- 检查是否使用或如何使用模块加载器，比如`require`或`define`
- CommonJS/Node.js风格的导入如`var fs = require("fs");`
- `define(...)`调用
- 文档里说明了如何去`require`或导入这个库

> 直接看源码，还是挺简单粗暴的

​	**全局库的例子**

​	由于把一个全局库转变成UMD库是非常容易的，所以很少流行的库还再使用全局的风格。 然而，小型的且需要DOM（或*没有*依赖）的库可能还是全局类型的。